<h2>Registrador Nuevo Estudiante</h2>

<!-- Mensaje si estamos en modo edición -->
<p *ngIf="modoEdicion">Editando estudiante #{{ estudianteEditando?.id }}</p>

<!-- Formulario de registro / edición -->
<div class="form-group">
  <label for="nombre">Nombre del Estudiante:</label>
  <input
    type="text"
    id="nombre"
    [(ngModel)]="nuevoEstudiante.nombre"
    placeholder="Ej. Juan Pérez"
    required
  />
</div>

<div class="form-group">
  <label for="carrera">Carrera:</label>
  <select
    id="carrera"
    [(ngModel)]="nuevoEstudiante.carreraId"
    required
  >
    <option value="" disabled>Seleccione una carrera</option>
    <option *ngFor="let carrera of carreras" [value]="carrera.id">
      {{ carrera.nombre }}
    </option>
  </select>
</div>

<!-- Botones del formulario -->
<div class="form-group">
  <button *ngIf="!modoEdicion" (click)="registrarEstudiante()">Registrar</button>
  <button *ngIf="modoEdicion" (click)="guardarEdicion()">Guardar</button>
  <button *ngIf="modoEdicion" (click)="resetFormulario()">Cancelar</button>
</div>

<hr />

<h2>Estudiantes Registrados</h2>

<!-- Buscador -->
<div class="form-group">
  <label for="search">Buscar estudiante o carrera:</label>
  <input
    id="search"
    type="text"
    [(ngModel)]="searchTerm"
    placeholder="Ej. Ingeniería o Ana"
  />
</div>

<!-- Tabla de estudiantes -->
<table>
  <thead>
    <tr>
      <th>Ingreso</th>
      <th>Nombre</th>
      <th>Carrera</th>
      <th>Acciones</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let estudiante of getEstudiantesFiltrados()">
      <td>{{ estudiante.id }}</td>
      <td>{{ estudiante.nombre }}</td>
      <td>{{ estudiante.nombreCarrera }}</td>
      <td>
        <button (click)="iniciarEdicion(estudiante)">Editar</button>
        <button (click)="eliminarEstudiante(estudiante.id)">Eliminar</button>
      </td>
    </tr>
    <tr *ngIf="getEstudiantesFiltrados().length === 0">
      <td colspan="4">No se encontraron estudiantes que coincidan con el criterio.</td>
    </tr>
  </tbody>
</table>
